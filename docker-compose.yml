services:
  app:
    build: .
    container_name: multi-agent-rag-app
    environment:
      - GROQ_API_KEY=${GROQ_API_KEY}
      - GROQ_API_BASE=https://api.groq.com

      # âœ” Docker-safe query (input() cannot be used inside containers)
      # You can change this or override at runtime:
      # docker-compose run -e DEMO_QUERY="Your question" app
      - DEMO_QUERY=What is the main point of the documents?

    volumes:
      - .:/app

    # ensure container prints logs nicely
    tty: true
    stdin_open: false  # Prevents input() crashes

    # Run Python module (NOT script)
    command: ["python", "-m", "src.main"]
